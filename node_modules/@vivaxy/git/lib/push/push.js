"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @since 2019-06-28 10:13
 * @author vivaxy
 */
const branch_1 = require("../branch");
const remote_1 = require("../remote");
const helpers_1 = require("../helpers");
async function push({ cwd, setUpstream = false, followTags = false, stdio = 'inherit', }) {
    const branch = await branch_1.getCurrentBranch({ cwd });
    if (!branch) {
        throw new Error('Invalid branch');
    }
    const remote = await remote_1.getCurrentRemote({ cwd });
    if (!remote) {
        throw new Error('Invalid remote');
    }
    const args = ['push'];
    if (setUpstream) {
        args.push('--set-upstream');
    }
    args.push(remote, branch);
    if (followTags) {
        args.push('--follow-tags');
    }
    await helpers_1.betterExeca('git', args, {
        stdio,
        cwd,
    });
}
exports.default = push;
