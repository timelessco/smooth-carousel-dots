"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @since 2019-06-27 11:06
 * @author vivaxy
 */
const helpers_1 = require("../helpers");
async function getRevCount({ from, to = 'HEAD', leftOnly = false, paths, cwd, }) {
    let sha = `${from}...${to}`;
    if (!from) {
        sha = to;
    }
    let args = ['rev-list', '--count', sha];
    if (leftOnly) {
        args.push('--left-only');
    }
    if (paths) {
        args.push('--', ...paths);
    }
    const { exitCode, stdout } = await helpers_1.betterExeca('git', args, { cwd });
    if (exitCode === 0) {
        return Number(stdout);
    }
    return Infinity;
}
exports.default = getRevCount;
